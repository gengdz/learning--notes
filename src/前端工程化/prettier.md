# Prettier

## 是什么

Prettier 是一个有自己主张的代码格式化工具，可以使团队代码风格统一。

## Prettier 工作原理

1. Prettier 会读取代码文件，将代码解析成 AST。
2. 根据定义的规则对 AST 进行代码的重写，使其符合规则，输出标准化的代码。

Prettier 与各种编辑器和 IDE 的集成方式：

- 插件：Prettier 提供了各种编辑器和 IDE 的插件（比如 VSCode）。安装后可以在编辑器中自动格式化代码。
- 命令行工具：Prettier 可以通过命令行来格式化代码。
- 配置文件：Prettier 支持在项目根目录下创建配置文件，例如 `.prettierrc` 来设置代码格式化的选项。编辑器和 IDE 可以读取这个配置文件，并自动应用格式化选项

可以设置的内容：比如：

- 行的最大长度
- 是使用分号还是不使用分号
- 如何换行。

## 为什么用？

采用 Prettier 的最大原因是为了停止所有正在进行的关于样式的争论。人们普遍认为，拥有一个通用的风格指南对一个项目和团队来说是有价值的，但实现这一目标是一个非常痛苦且没有回报的过程。

## 怎么使用？

以 VSCode 为例

1. 下载 Prettier 插件。
2. 在项目的根目录创建 .prettierrc 文件，并写入一些规则。
3. 格式化代码（编辑器提供了格式化代码的功能）。

配置的方式（按照优先级排序）：

- .prettierrc 文件
- package.json 文件添加 "prettier" key

如果两个地方都配置了，那么取优先级高的。

怎么对某些文件停止使用？在项目根目录定义：`.prettierignore` 文件。

[Prettier 体验地址](https://www.prettier.cn/playground/)

## 配置项

| 名称       | 作用                                        | 选项                                  |
| ---------- | ------------------------------------------- | ------------------------------------- |
| prose-wrap | 是否在 markdown 按照 print-width 的设定换行 | 默认值"preserve",尽量保持原文本的换行 |

## QA

1. 安装了插件就能生效了，为什么在项目中还要安装这个依赖？因为

- 插件要使用本地或者全局的 prettier 版本来格式化本地项目
- 在命令行的使用中需要要到这个依赖。
- 可以和 Git 结合使用。比如 Husky
