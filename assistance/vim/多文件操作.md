# 多文件操作

文件是存储在磁盘上的，而缓冲区存在于内存中。

多文件操作相关的概念

* Buffer 是指打开的一个文件的内存缓冲区
* Window 是 Buffer 可视化的分割区域
* Tab 组织窗口为一个工作区

![Tabs-windows-buffers](./Tabs-windows-buffers.png)


## Buffer

* `:ls` 列出缓冲区
* `vim a.md b.md` 一次性打开多个文件。
    * `:bn[ext]` 切换到下一个文件，
    * `:bp[revious]` 切换到上一个。
    * `:bn[umber]` 直接打开
    * `:b buffername` 使用 tab 补全 
* :e filename 使用这个命令切换到新文件时，vim 会把之前的文件记为 #，当前的文件记录为 % 。因此可以使用
    * :e # 切换到上一个。Ctrl+^ 效果相同
    * :e! # 放弃当前文件，返回到上一个文件中。



## window

* `<C-w>w` 在窗口间循环切换



### 移动窗口

* `<C-w>r` 向右或者向下交换窗口
* `<C-w>H` 移动窗口到屏幕左侧



### 调整窗口尺寸

* `<C-w>=` 让所有窗口调整至相同尺寸
* `:res(ize) num` 例如：:res 5，显示行数调整为 5 行
* `:res(ize)+num` 把当前窗口高度增加 num 行
* `:res(ize)-num` 把当前窗口高度减少 num 行
横向调整
* `:vertical res(ize) num` 指定当前窗口为 num 列
* `:vertical res(ize)+num` 把当前窗口增加 num 列
* `:vertical res(ize)-num` 把当前窗口减少 num 列



### 关闭窗口

* `:q` 退出当前窗口
* `:only` 关闭其他窗口
* `:qa` 关闭所有窗口



## Tab

* `:tabnew [filename]` 打开新的 tab
* `:tabe[dit] [filename]` 打开新的 tab
* `:tabc[lose]` 关闭当前 tab
* `:tabo[nly]` 关闭其他 tab
* `:tabs` 查看所有打开的 tab


### Tab 切换

* `:tabp` 或 `gT` 前一个
* `:tabn` 或 `gt` 后一个



### 关闭 Tab

`:tabc` 关闭当前的 tab
`:tabo[ther]` 关闭所有其他的 tab



### 移动 Tab

`:tabmove 1` 移动当前的 tab 到 第二个。从 0 开始的。



## 文件操作

* `:e[dit] filename` 打开文件
* `:e[dit] %<tab>` 自动显示整个路径，然后可以使用 `<C-w` 来删除单词
* `:e[dit] %:h<tab>` 自动去掉文件名。

* 不想退出 vim，又想在保存钱创建目录，可以使用 `:!mkdir -p 目录名/文件名`，然后再执行写入。还可以使用 `:e %:h<tab>` 来快速补全相对路径。

