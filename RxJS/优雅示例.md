# 优雅示例
## complex-flatten
```javascript
const flattenArray = (data) =>
  from(data).pipe(
    filter((v) => !!v),
    mergeMap((v) => {
      if (Array.isArray(v)) {
        return from(v);
      } else if (v?.props?.children) {
        return flattenArray(from(v.props.children));
      } else {
        return of(v);
      }
    })
  );

const data = [
  1,
  null,
  [2, 3],
  {
    props: {
      children: [
        4,
        5,
        null,
        [6, 7],
        {
          props: {
            children: [8, 9, 10]
          }
        }
      ]
    }
  }
];
  
// 使用如下
flattenArray(data).subscribe(console.log); //=> 1, 2, 3, 4, 5
flattenArray(data).pipe(toArray()).subscribe(console.log); //=> [1, 2, 3, 4, 5]
```