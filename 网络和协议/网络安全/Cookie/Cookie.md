# Cookie
HTTP 协议是无状态的，也就是说它不知道访问当前内容的用户身份，这种情况在原始时代还行，但是随着前端的不断发展，我们需要识别到当前用户，这样我们才能对当前用户进行管理，比如是否是会员，比如这是谁的购物车，比如能否打开一些内容，等等。
这时候，Cookie 的方案就产生了。



## 现象
### 购物车
- 没登陆京东买了东西，可以加入购物车
- 加入之后，关闭浏览器，再打开京东购物车里面的内容还在
- 关机之后，再打开京东，购物车里面的内容还在

### 邮箱
* 输入密码之后选择十天免密登陆
* 再次打开网站直接进入我的邮箱的首页

### 上述现象说明了什么？
* Cookie 是存放在客户端的
* Cookie 是存在硬盘上的而不是磁盘上的



## Cookie 简介
Cookie 是一种网络会话状态跟踪的技术

会话是由一组请求和响应组成，围绕着一个相关事情发起的请求和响应，这些请求和响应之间一定是需要数据的传递，而 HTTP 协议是一种无状态协议，在不同的请求之间是不能进行数据传递的，此时就需要一种数据间可以进行请求间数据传递的会话跟踪技术，而 Cookie 就是这么一种技术。

Cookie 是由服务端生成，保存在客户端的一种信息载体。载体存放着用户访问该◊站点的会话状态信息。

用户在提交第一次请求后，由服务端生成 Cookie，并将其封装在响应头中，以响应的形式发送给客户端，客户端收到响应之后，就会把 Cookie 保存到客户端。当客户端再次发送 **同类请求** 后，在请求中会携带 Cookie，发送到服务器，由服务端对会话进行跟踪。

Cookie 由若干键值对构成。key 和 value 都是 String 类型的

同类请求
* url 由两部分组成，资源路径 + 资源名称
* 资源路径相同的称为同类请求

Cookie 由后端生成并且可以进行控制，一般可设置的属性为

设置 Cookie 的有效期，设置值大于 0，表示存在内存中，设置值小于 0，或者不设置值，表示存放在浏览器的缓存中



## 代码中的体现
> ⚠️ 下面是伪代码

服务端代码
```java
// 设置 Cookie
response.setCookie('userId', 'abcsdff', 「过期时间」, 「可以看到 Cookie 的路径」);
```
这样客户端访问之后，就会把 Cookie 写到浏览器中。
Cookie 可以设置过期时间。上述示例「购物车」中，就是因为 Cookie 设置了过期时间。所以还可以看到

```java
// 获取 Cookie
request.getCookie();
```

当我们在客户端写入数据时，客户端会自动的在请求的时候把 Cookie 值带上。