# React理论知识
`UI = F(state)`

## DOM(Document Object Model)
浏览器中的概念，用js 对象来表示页面上的元素，并提供了操作 DOM 对象的 API;



## 虚拟DOM(Virtual Document Object Model)
框架中的概念，用 js 对象的形式来模拟页面上的dom和其嵌套关系

## diff算法
* tree diff
新旧两棵DOM树，逐层对比的过程，就是 tree diff
* component diff
在进行 tree diff的时候，每一层中组件级别的对比，就叫 component diff
* element diff
在进行组件级别对比的时候，如果两个组件类型相同，则需要进行元素级别的对比，这就叫 element diff




## 受控组件和非受控组件
受控组件是指：组件的改变，完全受控于数据的变化，数据变化了页面就变化了。
非受控组件是指：直接操作DOM，不做数据的绑定，然后通过 ref 直接去取DOM上的内容。

代码示例
受控组件（多写这种）
```javascript
// 受控组件 
<input value={value} onChange={onValueChange} />
```

非受控组件（少写不写这种）
```javascript
// 非受控组件 可以在Input组件里面输入任意内容，然后通过 ref 获取里面的值
<input ref />
```



## 事件的this指向
* 箭头函数
原理是：作用域的东西，箭头函数没有 this, 他就会往上找，找到类的this，也就是组件本身。
* bind
一般在 constructor 中，做 bind 的绑定，这样可以使函数的引用保持一份，避免引用改变带来的无谓渲染。



## 模块是什么？组件是什么？类是什么？被编译成什么？
模块是 weback 中概念，是引用的一个个文件，可以是 js,可以是 css 等等
组件是页面的一部分，
类被编译成了一个函数。


## react-router 
v4的核心改动？
路由变成了组件的形式，之前是配置的方式。

hashHistory 和 browserHistory
browserHistory 需要后端配合，需要后端做路由的配置。
hashHistroy 哈希路由，不需要后端配合，

## 异步组件（按需加载）
场景是： 当你整个项目打包之后，最后的代码文件很大。这时候，你可能需要按需加载一部分，也就是，当用户访问首页的时候加载首页的代码，当访问这个菜单的时候，加载这个菜单的代码。
相关的库 Reloadable


## xss攻击在react中如何防范？
react 本身已经做了这个，但是有一个需要自己考虑 
`dangerouslySetInnerHTML` 
```javascript
 <p
  dangerouslySetInnerHTML={{
    __html: getURL(dialogData.content),
  }}
 />
```